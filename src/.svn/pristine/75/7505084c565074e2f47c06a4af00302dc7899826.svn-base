
class Level11 extends egret.DisplayObjectContainer implements egret.DisplayObject {
	public static instance: Level11;
	public _pic: egret.Bitmap;
	public _pic2: egret.Bitmap;
	public _img: Array<egret.Bitmap> = [];
	public _txt: egret.TextField;
	public _btn: egret.Bitmap;
	public _secondFlag: number = 0;
	public _lag: boolean = false
	private _tag: number = 0
	//


	public constructor() {
		super();
		Level11.instance = this;
		// 监听组件创建完毕 也就是场景的外观创建完毕
		this.addEventListener(egret.Event.ADDED_TO_STAGE, this.onEnter, this);
		this.addEventListener(egret.Event.REMOVED_FROM_STAGE, this.onExit, this);
	}


	//碰撞检测
	public static testHit(b: egret.Bitmap): boolean {//相交，则为 false；否则为 true。 
		return !b.hitTestPoint(213, 232/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(179, 266/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(168, 310/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(184, 358/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(223, 384/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(277, 382/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(311, 348/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(324, 298/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(305, 252/820*UI.WINSIZE_H, true)
			&& !b.hitTestPoint(265, 234/820*UI.WINSIZE_H, true);         	


	}


	public static iscrash() {
		enum imgName {
			"cloud_lev003_1" = 0, "cloud_lev003_2", "cloud2_lev003_1", "cloud2_lev003_2",
			"sun_lev003", "flower-pot_lev003", "flower_lev003"
		}

		if (Level11.testHit(Level11.instance._img[imgName["cloud_lev003_1"]]) == true
			&& Level11.testHit(Level11.instance._img[imgName["cloud_lev003_2"]]) == true
			&& Level11.testHit(Level11.instance._img[imgName["cloud2_lev003_1"]]) == true
			&& Level11.testHit(Level11.instance._img[imgName["cloud2_lev003_2"]]) == true) {
			//未碰撞
			Level11.instance._pic = UI.addPic(Level11.instance, "flower_lev003_png", 256, UI.WINSIZE_H / 2 + 154, true);
			Level11.instance._pic.scaleX = 0.61;
			Level11.instance._pic.scaleY = 0.61;


			Level11.instance._pic = UI.addPic(Level11.instance, "ok_png", UI.WINSIZE_W / 2, UI.WINSIZE_H / 2, true);
			Level11.instance._pic.scaleX = 0;
			Level11.instance._pic.scaleY = 0;
			Level11.instance._pic2 = UI.addPic(Level11.instance, "check2_png", UI.WINSIZE_W / 2, UI.WINSIZE_H / 2, true);
			Level11.instance._pic2.scaleX = 0;
			Level11.instance._pic2.scaleY = 0;
			let tw = egret.Tween.get(Level11.instance._pic);
			tw.to({ scaleX: 0.45, scaleY: 0.45 }, 700, egret.Ease.sineIn);
			let tw2 = egret.Tween.get(Level11.instance._pic2);
			tw2.to({ scaleX: 1, scaleY: 1 }, 700, egret.Ease.sineIn);
		}

	}


	protected onEnter() {
		//-----------------------------------------------------------------------------------------------图片处理
		enum imgName {
			"cloud_lev003_1" = 0, "cloud_lev003_2", "cloud2_lev003_1", "cloud2_lev003_2",
			"sun_lev003", "flower-pot_lev003", "flower_lev003"
		}


		this._img[imgName["sun_lev003"]] = UI.addPic(this, "sun_lev003_png", 245, UI.WINSIZE_H / 2 - 107/820*UI.WINSIZE_H, true);
		this._img[imgName["sun_lev003"]].scaleX = 0.48
		this._img[imgName["sun_lev003"]].scaleY = 0.48
		/* 描点
		let shape1:egret.Shape = new egret.Shape();
		shape1.graphics.beginFill(0x336699)
		shape1.graphics.drawRect(213, 232/820*UI.WINSIZE_H,5,5)
		shape1.graphics.endFill()
		this.addChild(shape1)

		let shape2:egret.Shape = new egret.Shape();
		shape2.graphics.beginFill(0x336699)
		shape2.graphics.drawRect(179, 266/820*UI.WINSIZE_H,5,5)
		shape2.graphics.endFill()
		this.addChild(shape2)

		let shape3:egret.Shape = new egret.Shape();
		shape3.graphics.beginFill(0x336699)
		shape3.graphics.drawRect(168, 310/820*UI.WINSIZE_H,5,5)
		shape3.graphics.endFill()
		this.addChild(shape3)

		let shape4:egret.Shape = new egret.Shape();
		shape4.graphics.beginFill(0x336699)
		shape4.graphics.drawRect(184, 358/820*UI.WINSIZE_H,5,5)
		shape4.graphics.endFill()
		this.addChild(shape4)

		let shape5:egret.Shape = new egret.Shape();
		shape5.graphics.beginFill(0x336699)
		shape5.graphics.drawRect(223, 384/820*UI.WINSIZE_H,5,5)
		shape5.graphics.endFill()
		this.addChild(shape5)

		let shape6:egret.Shape = new egret.Shape();
		shape6.graphics.beginFill(0x336699)
		shape6.graphics.drawRect(277, 382/820*UI.WINSIZE_H,5,5)
		shape6.graphics.endFill()
		this.addChild(shape6)

		let shape7:egret.Shape = new egret.Shape();
		shape7.graphics.beginFill(0x336699)
		shape7.graphics.drawRect(311, 348/820*UI.WINSIZE_H,5,5)
		shape7.graphics.endFill()
		this.addChild(shape7)
		
		let shape8:egret.Shape = new egret.Shape();
		shape8.graphics.beginFill(0x336699)
		shape8.graphics.drawRect(324, 298/820*UI.WINSIZE_H,5,5)
		shape8.graphics.endFill()
		this.addChild(shape8)

		let shape9:egret.Shape = new egret.Shape();
		shape9.graphics.beginFill(0x336699)
		shape9.graphics.drawRect(305, 252/820*UI.WINSIZE_H,5,5)
		shape9.graphics.endFill()
		this.addChild(shape9)

		let shape10:egret.Shape = new egret.Shape();
		shape10.graphics.beginFill(0x336699)
		shape10.graphics.drawRect(265, 234/820*UI.WINSIZE_H,5,5)
		shape10.graphics.endFill()
		this.addChild(shape10)
		*/
		


		
		this._img[imgName["flower-pot_lev003"]] = UI.addPic(this, "flower-pot_lev003_png", 245, 245/820*UI.WINSIZE_H + UI.WINSIZE_H / 2, true);
		this._img[imgName["flower-pot_lev003"]].scaleX = 0.52
		this._img[imgName["flower-pot_lev003"]].scaleY = 0.52

		this._img[imgName["cloud_lev003_1"]] = UI.addPic(this, "cloud_lev003_png", 335, UI.WINSIZE_H / 2 - 156/820*UI.WINSIZE_H, true);
		this._img[imgName["cloud_lev003_1"]].scaleX = 0.45
		this._img[imgName["cloud_lev003_1"]].scaleY = 0.45

		this._img[imgName["cloud_lev003_2"]] = UI.addPic(this, "cloud_lev003_png", 161, UI.WINSIZE_H / 2 - 176/820*UI.WINSIZE_H, true);
		this._img[imgName["cloud_lev003_2"]].scaleX = 0.4
		this._img[imgName["cloud_lev003_2"]].scaleY = 0.4

		this._img[imgName["cloud2_lev003_1"]] = UI.addPic(this, "cloud2_lev003_png", 317, UI.WINSIZE_H / 2 - 52/820*UI.WINSIZE_H, true);
		this._img[imgName["cloud2_lev003_1"]].scaleX = 0.54
		this._img[imgName["cloud2_lev003_1"]].scaleY = 0.54

		this._img[imgName["cloud2_lev003_2"]] = UI.addPic(this, "cloud2_lev003_png", 139, UI.WINSIZE_H / 2 - 88/820*UI.WINSIZE_H, true);
		this._img[imgName["cloud2_lev003_2"]].scaleX = 0.47
		this._img[imgName["cloud2_lev003_2"]].scaleY = 0.47
		


		//监听事件
		for (let i = 0; i < 4; i++) {
			Level11.instance._img[i].addEventListener(egret.TouchEvent.TOUCH_BEGIN, function (e: egret.TouchEvent) {
				this.setChildIndex(this._img[i], 1000)
			}, this);
			Level11.instance._img[i].addEventListener(egret.TouchEvent.TOUCH_MOVE, function (e: egret.TouchEvent) {
				Level11.instance._img[i].x = e.stageX;
				Level11.instance._img[i].y = e.stageY;
				Level11.iscrash();
			}, this);
			this._img[i].$setTouchEnabled(true);
		}

	}

	protected onExit() {
		//必须要加入
	}


}








