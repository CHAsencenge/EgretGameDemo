var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,s){function o(e){try{l(i.next(e))}catch(t){s(t)}}function r(e){try{l(i["throw"](e))}catch(t){s(t)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,r)}l((i=i.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(a)throw new TypeError("Generator is already executing.");for(;l;)try{if(a=1,s&&(o=s[2&n[0]?"return":n[0]?"throw":"next"])&&!(o=o.call(s,n[1])).done)return o;switch(s=0,o&&(n=[0,o.value]),n[0]){case 0:case 1:o=n;break;case 4:return l.label++,{value:n[1],done:!1};case 5:l.label++,s=n[1],n=[0];continue;case 7:n=l.ops.pop(),l.trys.pop();continue;default:if(o=l.trys,!(o=o.length>0&&o[o.length-1])&&(6===n[0]||2===n[0])){l=0;continue}if(3===n[0]&&(!o||n[1]>o[0]&&n[1]<o[3])){l.label=n[1];break}if(6===n[0]&&l.label<o[1]){l.label=o[1],o=n;break}if(o&&l.label<o[2]){l.label=o[2],l.ops.push(n);break}o[2]&&l.ops.pop(),l.trys.pop();continue}n=t.call(e,l)}catch(i){n=[6,i],s=0}finally{a=o=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var a,s,o,r,l={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return r={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r},Scene=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onEnter,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onExit,t),t}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(Scene.prototype,"Scene",["egret.DisplayObject"]);var Time=function(){function e(){}return e}();__reflect(Time.prototype,"Time");var GameData=function(){function e(){}return e.initData=function(){e.isFirstEntry()&&e.saveData(),e.readData()},e.saveData=function(){e.saveItem("_gLevel",e._gLevel),e.saveItem("_gGold",e._gGold),e.saveItem("_gIsVibrate",e._gIsVibrate),e.saveItem("_gSeleBall",e._gSeleBall),e.saveItem("_gGiftRate",e._gGiftRate);for(var t=0;12>t;t++){var n="_gMallBalls"+t;e.saveItem(n,e._gMallBalls[t])}},e.readData=function(){e._gLevel=e.getItem("_gLevel"),e._gGold=e.getItem("_gGold"),e._gIsVibrate=e.getItem("_gIsVibrate"),e._gSeleBall=e.getItem("_gSeleBall"),e._gGiftRate=e.getItem("_gGiftRate");for(var t=0;12>t;t++){var n="_gMallBalls"+t;e._gMallBalls[t]=e.getItem(n)}},e.getDropGold=function(){return Flash.random(8)+10},e.getDropRate=function(){return Flash.random(8)+10},e.getDropBoxGold=function(){return Flash.random(200)+500},e.finishLevel=function(t,n){e._gLevel=e._gLevel+1,e._gLevel>201&&(e._gLevel=201),e.saveItem("_gLevel",e._gLevel),e.addGold(t),e.addGiftRate(n)},e.unlockBall=function(t){e._gMallBalls[t]=1;for(var n=0;12>n;n++){var i="_gMallBalls"+n;e.saveItem(i,e._gMallBalls[n])}},e.addGiftRate=function(t){e._gGiftRate=e._gGiftRate+t,e._gGiftRate>100&&(e._gGiftRate=0),e.saveItem("_gGiftRate",e._gGiftRate)},e.selectBall=function(t){e._gSeleBall=t,e.saveItem("_gSeleBall",e._gSeleBall)},e.addGold=function(t){e._gGold=e._gGold+t,e._gRefreshGoldFlag=!0,e.saveItem("_gGold",e._gGold)},e.cutGold=function(t){e._gGold=e._gGold-t,e._gGold<0&&(e._gGold=0),e._gRefreshGoldFlag=!0,e.saveItem("_gGold",e._gGold)},e.saveItem=function(e,t){egret.localStorage.setItem(e,t.toString())},e.getItem=function(e){var t=egret.localStorage.getItem(e);return Number(t)},e.isFirstEntry=function(){var t=e.GAME_FIRST_FLAG,n=egret.localStorage.getItem(t);e.saveItem(t,1);var i=Number(n);return 0==i?!0:!1},e.DEBUG=!1,e.GAME_FIRST_FLAG="qiuqiu_9",e._gLevel=1,e._gGold=0,e._gIsVibrate=1,e._gSeleBall=1,e._gGiftRate=0,e._gMallBalls=[1,0,0,0,0,0,0,0,0,0,0,0],e._gRefreshGoldFlag=!1,e}();__reflect(GameData.prototype,"GameData");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var Main=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){egret.lifecycle.addLifecycleListener(function(e){e.onUpdate=function(){}}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()},this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),this.createGameScene(),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 2:return n.sent(),this.stage.removeChild(e),[3,4];case 3:return t=n.sent(),console.error(t),[3,4];case 4:return[2]}})})},t.prototype.createGameScene=function(){UI.WINSIZE_W=egret.MainContext.instance.stage.stageWidth,UI.WINSIZE_H=egret.MainContext.instance.stage.stageHeight,SceneManager.Instance.rootLayer=this;var e=new SplashScene;SceneManager.Instance.changeScene(e)},t.prototype.createBitmapByName=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},t.prototype.startAnimation=function(e){var t=this,n=new egret.HtmlTextParser,i=e.map(function(e){return n.parse(e)}),a=this.textfield,s=-1,o=function(){s++,s>=i.length&&(s=0);var e=i[s];a.textFlow=e;var n=egret.Tween.get(a);n.to({alpha:1},200),n.wait(2e3),n.to({alpha:0},200),n.call(o,t)};o()},t}(egret.DisplayObjectContainer);__reflect(Main.prototype,"Main");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.showBanner=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.hideBanner=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.startRecord=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.stopRecord=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.shareRecord=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.vibrate=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.playAdVideo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.returnVideoStatus=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{testid:"001"}]})})},e.prototype.getChannelName=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{testid:"001"}]})})},e.prototype.getChannel=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{testid:"001"}]})})},e.prototype.getChannelFile=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{testid:"001"}]})})},e.prototype.getVersion=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{testid:"001"}]})})},e.prototype.getShareFlag=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{testid:"001"}]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,i){function a(e){t.call(i,e)}function s(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),n.call(i))}var o=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(i,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(i,generateEUI2)},o)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var r=e.split("/");r.pop();var l=r.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(i,generateJSON.paths[e])},this):RES.getResByUrl(l,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(i,generateJSON.paths[e])},o)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(i,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,s,null),RES.getResByUrl(e,a,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Flash=function(){function e(){}return e.random=function(e){var t=Math2.numberBetween(0,e-1,!0);return t},e.saveItem=function(e,t){egret.localStorage.setItem(e,t)},e.getItem=function(e){var t=egret.localStorage.getItem(e);return t},e.setImageColor=function(e,t,n,i){var a={r:-1,g:-1,b:-1};a.b=i,a.g=n,a.r=t;var s=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];s[0]=a.r/255,s[6]=a.g/255,s[12]=a.b/255;var o=new egret.ColorMatrixFilter(s);e.filters=[o]},e}();__reflect(Flash.prototype,"Flash");var KeySystem=function(){function e(){this.isListening=!1}return Object.defineProperty(e,"instance",{get:function(){return null==e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.add=function(){0==this.isListening&&(this.isListening=!0,document.addEventListener("keydown",e.instance.onKeyDown),document.addEventListener("keyup",e.instance.onKeyUp))},e.prototype.onKeyDown=function(t){32==t.keyCode&&(e.keyPressedSpace=!0),38==t.keyCode&&(e.keyPressedUp=!0),37==t.keyCode&&(e.keyPressedLeft=!0),40==t.keyCode&&(e.keyPressedDown=!0),39==t.keyCode&&(e.keyPressedRight=!0),87==t.keyCode&&(e.keyPressedW=!0),65==t.keyCode&&(e.keyPressedA=!0),83==t.keyCode&&(e.keyPressedS=!0),68==t.keyCode&&(e.keyPressedD=!0)},e.prototype.onKeyUp=function(t){32==t.keyCode&&(e.keyPressedSpace=!1),38==t.keyCode&&(e.keyPressedUp=!1),37==t.keyCode&&(e.keyPressedLeft=!1),34==t.keyCode&&(e.keyPressedDown=!1),39==t.keyCode&&(e.keyPressedRight=!1),87==t.keyCode&&(e.keyPressedW=!1),65==t.keyCode&&(e.keyPressedA=!1),83==t.keyCode&&(e.keyPressedS=!1),68==t.keyCode&&(e.keyPressedD=!1)},e.prototype.addListener=function(){e._instance.add()},e.prototype.checkCount=function(){document.removeEventListener("keydown",e.instance.onKeyDown),document.removeEventListener("keyup",e.instance.onKeyUp),this.isListening=!1},e.prototype.removeListener=function(){this.checkCount()},e.keyPressedUp=!1,e.keyPressedW=!1,e.keyPressedDown=!1,e.keyPressedS=!1,e.keyPressedSpace=!1,e.keyPressedLeft=!1,e.keyPressedA=!1,e.keyPressedRight=!1,e.keyPressedD=!1,e.initialized=!1,e}();__reflect(KeySystem.prototype,"KeySystem");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function i(i){t.call(n,i,e)}if(RES.hasRes(e)){var a=RES.getRes(e);a?i(a):RES.getResAsync(e,i,this)}else RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var SceneManager=function(){function e(){}return Object.defineProperty(e,"Instance",{get:function(){return null==e._manager&&(e._manager=new e),e._manager},enumerable:!0,configurable:!0}),e.prototype.changeScene=function(e){this.currentScene&&(this.rootLayer.removeChild(this.currentScene),this.currentScene=null),this.rootLayer.addChild(e),this.currentScene=e},e.prototype.pushScene=function(e){this.popScene(),this.pop_scene||(this.rootLayer.addChild(e),this.pop_scene=e)},e.prototype.popScene=function(){this.pop_scene&&(this.rootLayer.removeChild(this.pop_scene),this.pop_scene=null)},e}();__reflect(SceneManager.prototype,"SceneManager");var ShakeTool=function(){function e(){this.count=0,this.timer=new egret.Timer(1e3)}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.shakeObj=function(e,t,n,i){this.stop(),this.target=e,this.initX=e.x,this.initY=e.y,this.maxDis=i,this.count=t*n,this.rate=n,this.timer.delay=1e3/n,this.timer.repeatCount=this.count,this.timer.addEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.timer.reset(),this.timer.start()},e.prototype.shaking=function(){egret.Tween.removeTweens(this.target),this.target.x=this.initX-this.maxDis+Math.random()*this.maxDis*2,this.target.y=this.initY-this.maxDis+Math.random()*this.maxDis*2,egret.Tween.get(this.target).to({x:this.initX,y:this.initY},999/this.rate)},e.prototype.shakeComplete=function(){this.target&&(egret.Tween.removeTweens(this.target),this.target.x=this.initX,this.target.y=this.initY,this.target=null),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this)},e.prototype.stop=function(){this.shakeComplete()},e}();__reflect(ShakeTool.prototype,"ShakeTool");var Sound=function(){function e(){}return e.playSound=function(e){var t=new egret.Sound;t.addEventListener(egret.Event.COMPLETE,function(e){t.play(0,1)},this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){console.log("loaded error!")},this),t.load("resource/assets/sound/"+e+".mp3")},e.playMusic=function(e){var t=new egret.Sound;t.addEventListener(egret.Event.COMPLETE,function(e){t.play(0,0)},this),t.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){console.log("loaded error!")},this),t.load("resource/assets/sound/"+e+".mp3")},e}();__reflect(Sound.prototype,"Sound");var GameConfig=function(){function e(){}return e.getStageConfig=function(t){return e.STAGE_DATA[t]},e.STAGE_DATA=[[[2,2,2,1],[2,1,1,1],[]],[[6,2,1,6],[2,2,1,6],[],[],[1,6,2,1]],[[],[],[6,4,6,6],[5,5,12,5],[4,4,5,6]],[[4,2,3,2],[4,2,1,3],[4,1,4,3],[],[],[1,2,3,1]],[[5,2,6,6],[],[3,2,2,2],[3,3,3,6],[5,5,6,5]],[[2,2,5,5],[],[],[3,5,6,2],[3,2,6,3],[3,6,5,6]],[[6,5,5,3],[6,1,6,1],[1,3,6,5],[3,1,3,5],[]],[[1,1,3,3],[4,1,1,6],[3,4,6,6],[],[],[3,4,4,6]],[[],[],[5,5,6,2],[5,1,1,6],[2,3,1,3],[3,5,3,6],[6,2,1,6]],[[],[1,2,2,4],[],[1,2,1,3],[4,5,3,2],[5,5,4,3],[1,4,3,5]],[[4,5,5,6],[6,6,1,4],[4,5,3,5],[4,6,1,3],[],[1,1,3,3]],[[6,2,3,2],[4,3,4,3],[],[3,1,6,1],[],[1,2,6,4],[2,1,6,4]],[[3,3,6,1],[5,5,5,6],[4,1,4,1],[],[4,1,6,3],[6,3,4,5],[]],[[1,2,2,3],[],[5,6,1,1],[5,1,3,2],[3,5,2,5],[6,3,6,6]],[[2,3,4,5],[4,1,5,5],[],[3,2,3,1],[1,2,2,3],[5,1,4,4],[]],[[2,6,3,5],[6,4,1,3],[2,5,1,2],[4,6,4,2],[1,6,4,3],[],[],[5,3,5,1]],[[4,5,3,1],[1,2,3,6],[],[6,5,5,2],[2,3,6,5],[3,4,6,2],[4,1,1,4]],[[],[2,1,3,4],[5,3,2,4],[4,5,2,1],[6,6,5,5],[],[2,4,1,3],[6,6,3,1]],[[2,1,6,5],[5,4,2,4],[3,1,3,1],[5,3,5,6],[],[1,4,6,6],[],[4,3,2,2]],[[6,1,2,1],[3,5,4,5],[6,1,5,3],[],[5,3,3,6],[2,4,2,2],[1,4,6,4]],[[6,4,2,2],[3,6,1,4],[],[6,4,3,2],[1,1,6,3],[2,4,1,3]],[[5,6,6,3],[5,3,2,3],[1,4,6,1],[],[6,3,1,1],[4,2,2,5],[],[4,5,4,2]],[[],[6,1,4,8],[4,2,8,2],[5,6,3,4],[2,3,4,5],[2,8,1,6],[],[5,6,8,1],[3,5,3,1]],[[],[1,12,12,3],[6,1,4,3],[6,1,6,12],[5,5,3,12],[4,2,1,5],[3,6,2,5],[2,2,4,4]],[[6,2,5,1],[3,3,1,5],[6,4,1,3],[2,1,6,4],[4,2,5,4],[],[5,6,3,2]],[[],[3,12,1,3],[6,4,2,12],[],[12,1,2,12],[6,2,5,3],[5,4,5,3],[4,2,5,6],[1,6,1,4]],[[4,6,6,4],[6,1,5,3],[],[4,2,1,3],[5,5,1,4],[1,3,2,6],[2,2,5,3],[]],[[5,2,1,8],[6,6,6,3],[8,8,5,8],[],[4,3,6,1],[5,3,2,4],[4,4,2,5],[2,1,1,3]],[[3,13,2,6],[2,2,3,5],[5,6,4,1],[],[6,4,13,1],[5,3,2,4],[13,13,3,4],[5,1,1,6],[]],[[],[],[1,13,5,1],[1,5,2,13],[4,13,3,9],[6,4,5,2],[1,9,4,4],[9,9,6,2],[2,3,5,3],[13,6,3,6]],[[1,10,8,4],[6,10,5,3],[6,5,4,5],[3,8,2,10],[1,8,6,3],[2,2,1,3],[5,4,10,8],[],[6,1,4,2],[]],[[9,4,5,1],[6,4,3,3],[2,3,5,9],[],[6,4,5,3],[9,2,1,1],[2,2,9,12],[12,12,4,6],[1,6,5,12]],[[1,3,4,5],[6,8,6,8],[4,8,1,2],[5,3,2,3],[6,3,5,2],[8,4,4,6],[],[1,1,5,2]],[[11,12,5,1],[],[4,5,11,6],[6,2,1,4],[1,6,3,3],[6,5,2,11],[3,3,11,4],[4,12,2,12],[],[2,1,5,12]],[[9,6,9,8],[5,9,6,4],[],[],[8,2,3,6],[3,4,2,2],[8,5,8,6],[1,9,2,5],[5,1,1,3],[4,3,1,4]],[[8,1,3,13],[3,2,4,3],[],[13,5,13,6],[4,5,1,4],[1,2,8,5],[13,3,4,1],[6,2,8,6],[2,5,6,8]],[[2,1,1,2],[4,13,5,11],[11,4,1,13],[13,6,1,4],[11,3,6,5],[6,4,3,5],[],[2,3,11,2],[5,6,13,3],[]],[[10,10,3,2],[8,1,3,4],[10,6,5,2],[2,4,8,1],[8,3,1,4],[],[],[5,5,5,2],[8,10,3,1],[6,6,6,4]],[[10,11,2,10],[5,8,2,3],[5,4,1,6],[],[11,6,11,5],[1,3,3,1],[2,8,11,8],[5,4,3,10],[2,8,1,4],[4,6,10,6]],[[5,3,2,3],[5,1,3,6],[1,2,3,4],[],[5,2,4,1],[4,4,5,6],[1,6,2,6]],[[11,2,3,4],[4,1,3,6],[3,4,6,5],[2,5,2,1],[],[4,6,5,1],[6,11,1,2],[],[3,11,5,11]],[[5,1,6,6],[5,4,1,1],[10,4,4,1],[],[5,10,3,4],[6,9,3,2],[],[9,3,9,2],[2,10,3,2],[6,5,10,9]],[[],[5,1,13,4],[2,8,8,6],[13,1,6,4],[8,3,2,3],[5,5,1,2],[13,2,1,13],[4,3,6,5],[],[8,4,6,3]],[[2,8,7,1],[],[6,7,8,6],[2,5,2,3],[7,3,12,5],[4,4,7,12],[4,8,1,3],[12,12,5,2],[3,6,5,1],[4,1,6,8]],[[11,11,4,11],[5,5,3,1],[2,2,5,7],[6,2,3,4],[6,4,2,1],[],[5,7,1,1],[6,6,3,4],[11,3,7,7]],[[3,4,2,5],[5,2,1,3],[5,4,9,2],[6,6,9,6],[9,5,1,1],[3,6,1,2],[3,4,4,9],[]],[[11,3,11,3],[2,6,4,1],[3,5,6,13],[13,11,4,11],[2,5,13,1],[5,4,4,1],[13,3,6,6],[],[],[2,2,5,1]],[[2,6,1,4],[12,2,6,6],[9,12,13,3],[],[3,5,9,4],[13,3,5,2],[4,12,1,13],[4,3,6,2],[9,1,5,1],[12,5,13,9]],[[6,11,3,2],[5,5,6,4],[],[1,1,1,6],[4,2,2,10],[11,1,11,2],[4,5,5,3],[10,4,6,11],[],[3,10,10,3]],[[1,2,2,4],[10,1,6,1],[10,3,12,3],[6,1,4,12],[2,5,5,10],[3,5,5,10],[],[6,4,2,4],[6,12,12,3]],[[1,5,1,7],[],[6,2,5,5],[6,5,4,4],[1,7,4,3],[7,2,3,6],[2,3,7,4],[6,3,2,1]],[[3,3,5,1],[4,6,11,8],[1,11,5,2],[8,11,6,4],[6,4,8,8],[1,4,2,5],[3,6,5,1],[],[2,11,3,2],[]],[[4,9,4,6],[4,10,10,9],[5,3,9,5],[1,7,10,7],[6,2,7,2],[1,3,3,3],[2,6,6,1],[4,5,5,7],[],[1,2,9,10]],[[2,9,4,11],[8,6,5,8],[3,8,8,6],[2,5,3,5],[],[11,6,5,11],[1,1,9,2],[1,9,4,2],[3,3,4,4],[1,6,9,11]],[[5,3,3,6],[1,7,5,6],[],[7,11,1,4],[2,11,4,11],[5,4,3,2],[5,6,7,3],[2,1,6,11],[],[2,1,7,4]],[[5,5,6,4],[],[2,8,13,3],[8,3,3,9],[13,2,1,13],[2,6,8,4],[1,1,9,3],[9,6,2,13],[4,5,6,1],[],[5,8,4,9]],[[13,7,3,1],[3,6,5,6],[],[4,5,5,2],[],[1,1,10,1],[4,10,13,2],[4,7,10,7],[6,10,3,4],[2,13,6,3],[2,7,13,5]],[[4,5,7,5],[4,6,1,1],[4,10,2,8],[7,4,5,7],[8,10,8,1],[3,8,3,10],[2,6,6,2],[6,1,7,5],[],[10,2,3,3]],[[5,6,5,7],[2,6,4,13],[],[7,6,3,2],[1,13,5,4],[4,7,13,5],[3,1,13,4],[3,2,1,3],[],[6,1,7,2]],[[12,10,13,7],[10,10,1,7],[12,6,5,5],[5,4,13,2],[3,2,10,13],[1,2,13,6],[4,3,4,12],[6,12,7,1],[2,6,5,4],[3,3,7,1],[]],[[3,13,6,9],[6,5,11,2],[11,4,6,13],[4,5,1,13],[2,3,1,5],[],[],[1,2,11,4],[2,9,3,13],[11,1,3,9],[9,4,6,5]],[[9,6,7,3],[5,1,7,5],[3,6,4,9],[2,6,3,2],[6,1,9,1],[],[],[3,1,4,2],[7,5,4,5],[9,4,2,7]],[[5,2,4,11],[3,13,1,5],[10,10,2,6],[5,6,11,1],[13,6,6,10],[13,2,3,1],[4,13,4,11],[10,11,3,4],[5,1,2,3],[]],[[6,13,12,5],[5,13,2,3],[8,6,12,5],[],[],[2,8,4,13],[12,12,8,8],[3,6,1,4],[6,3,1,2],[2,5,1,4],[3,1,4,13]],[[13,5,3,11],[9,6,5,4],[],[2,4,9,13],[1,4,6,7],[2,9,7,6],[1,7,5,4],[],[3,13,6,1],[1,9,5,2],[3,11,11,3],[13,11,7,2]],[[],[13,10,13,1],[6,6,10,3],[1,5,6,8],[1,2,3,5],[5,13,4,2],[4,8,2,13],[11,2,3,5],[10,11,6,10],[8,3,11,4],[4,8,1,11]],[[2,12,5,3],[3,6,1,3],[2,4,11,5],[4,1,6,1],[4,6,2,2],[11,1,5,12],[4,5,11,3],[12,12,6,11],[],[]],[[11,2,11,12],[1,6,3,12],[],[13,11,6,4],[6,5,5,12],[2,13,13,3],[5,3,3,1],[1,4,4,4],[11,13,5,1],[6,2,12,2]],[[],[13,13,5,6],[4,12,8,10],[4,1,1,4],[3,2,6,12],[8,10,1,2],[8,2,13,8],[],[3,10,6,10],[5,12,5,6],[2,3,1,3],[5,12,13,4]],[[13,8,5,13],[4,6,13,8],[],[1,8,3,5],[1,3,6,5],[],[6,4,3,2],[4,8,1,5],[3,2,1,2],[6,4,2,13]],[[5,2,4,13],[5,4,3,6],[],[1,4,11,13],[2,7,2,1],[7,13,6,1],[2,6,11,6],[5,7,3,1],[7,3,11,13],[11,5,4,3]],[[4,1,5,6],[8,9,1,4],[8,13,8,7],[6,6,2,2],[3,9,3,5],[],[],[13,6,7,7],[13,5,3,4],[4,13,1,3],[1,9,2,5],[8,2,9,7]],[[9,3,11,13],[5,5,13,2],[2,13,6,10],[13,11,3,1],[],[8,6,4,8],[10,8,9,6],[8,2,1,10],[],[1,11,10,9],[3,9,3,4],[4,4,2,1],[5,11,5,6]],[[9,5,1,3],[8,9,12,3],[4,9,2,12],[4,4,8,2],[6,6,1,5],[9,12,1,3],[8,6,2,6],[],[12,5,8,5],[2,4,1,3]],[[6,6,1,4],[5,2,4,9],[],[1,13,9,13],[13,5,3,6],[2,3,2,5],[],[4,9,3,9],[1,4,1,5],[13,2,6,3]],[[5,10,10,2],[6,1,2,4],[6,5,7,7],[11,10,1,10],[1,11,2,8],[],[4,3,5,8],[5,3,2,6],[3,4,3,8],[4,6,11,8],[1,7,7,11]],[[6,3,5,7],[5,8,7,5],[6,2,3,8],[4,4,7,6],[2,1,7,4],[],[],[8,5,6,1],[4,3,8,1],[2,3,2,1]],[[3,2,1,5],[],[5,5,4,2],[13,5,4,13],[4,4,8,3],[],[3,6,8,1],[3,8,2,6],[6,6,13,1],[2,13,1,8]],[[9,2,13,1],[13,2,9,11],[4,13,5,5],[3,2,9,3],[1,6,11,4],[3,6,6,2],[11,4,1,4],[1,5,9,6],[],[3,5,11,13]],[[9,1,5,4],[],[3,13,8,8],[6,2,2,9],[2,9,10,6],[13,4,8,9],[4,2,10,3],[],[13,5,5,6],[4,5,10,10],[6,1,1,3],[13,8,3,1]],[[8,13,6,4],[12,9,9,4],[7,7,13,1],[1,2,3,8],[9,6,7,1],[2,1,5,8],[4,3,5,2],[13,3,3,5],[],[9,12,4,13],[12,12,7,6],[5,6,8,2]],[[11,4,5,1],[2,2,5,6],[9,11,1,4],[3,1,6,5],[9,4,3,9],[11,6,11,3],[],[6,3,1,4],[],[2,9,5,2]],[[11,4,5,1],[2,2,5,6],[9,11,1,4],[3,1,6,5],[9,4,3,9],[11,6,11,3],[],[6,3,1,4],[],[2,9,5,2]],[[6,12,9,5],[8,2,7,13],[],[],[6,1,4,3],[9,6,5,3],[],[2,1,9,9],[4,12,5,7],[1,3,8,8],[13,5,13,7],[3,6,4,12],[8,4,2,2],[1,12,7,13]],[[5,9,5,4],[6,9,1,2],[6,12,6,9],[2,4,5,6],[3,4,3,9],[1,1,12,12],[2,12,3,3],[],[1,2,4,5],[]],[[12,3,9,13],[4,6,1,6],[2,1,5,6],[6,12,2,3],[5,9,13,4],[5,9,5,12],[],[4,1,3,2],[1,3,13,13],[4,2,12,9]],[[4,11,12,10],[10,5,13,3],[2,3,6,11],[4,12,5,3],[],[13,1,4,6],[2,10,12,1],[11,5,5,1],[1,4,3,13],[],[12,2,6,2],[6,10,13,11]],[[2,8,7,3],[13,5,3,6],[13,6,4,9],[13,6,4,11],[1,4,8,11],[8,7,5,3],[],[2,1,7,7],[5,9,4,2],[8,9,3,11],[13,11,2,5],[6,1,9,1]],[[],[3,1,1,13],[13,5,4,5],[1,3,4,4],[5,13,4,5],[10,10,2,13],[2,1,3,6],[2,10,3,6],[],[6,2,6,10]],[[1,3,4,1],[5,7,2,9],[],[6,5,5,11],[2,7,6,3],[3,3,1,6],[5,11,7,4],[4,9,7,1],[9,9,11,11],[2,6,2,4]],[[2,3,7,3],[11,9,7,2],[],[5,11,11,7],[13,8,7,10],[1,2,6,3],[13,8,6,2],[],[4,9,10,6],[10,11,9,13],[1,13,6,1],[9,5,8,4],[1,3,10,8],[5,4,5,4]],[[3,4,1,11],[],[4,1,1,7],[],[10,3,9,5],[2,10,13,2],[7,9,3,2],[8,9,13,11],[6,11,8,13],[7,10,8,3],[5,10,1,2],[11,4,13,8],[9,7,6,6],[5,5,6,4]],[[5,6,9,5],[8,4,3,7],[],[5,1,2,3],[7,4,6,2],[1,6,9,8],[2,4,10,9],[5,9,2,10],[],[1,1,10,3],[7,6,7,8],[4,8,10,3]],[[8,1,2,1],[1,3,8,9],[9,8,12,2],[2,9,3,4],[1,6,3,4],[],[3,5,9,5],[5,4,8,2],[6,6,12,5],[4,6,12,12]],[[9,3,14,6],[2,6,9,11],[],[4,10,10,1],[5,13,3,2],[14,6,13,9],[10,7,12,9],[4,11,13,11],[5,4,1,12],[14,7,7,4],[1,11,5,1],[3,5,2,2],[14,3,13,12],[6,10,12,7]],[[],[4,4,3,14],[14,9,12,12],[],[6,11,12,5],[4,6,10,6],[3,4,12,10],[6,5,14,10],[10,7,7,2],[13,5,7,1],[2,9,1,13],[14,9,11,5],[2,11,2,1],[13,7,1,13],[3,3,11,9]],[[4,13,10,12],[8,2,14,3],[13,13,11,14],[4,8,10,6],[6,2,12,2],[1,5,1,14],[3,2,11,1],[],[4,8,7,7],[6,13,5,14],[4,3,10,10],[7,11,5,8],[7,6,12,5],[1,3,12,11],[]],[[6,7,3,2],[],[6,5,7,1],[8,4,1,2],[],[7,6,4,1],[6,4,5,2],[8,3,3,3],[4,8,2,5],[5,8,1,7]],[[],[9,4,9,2],[11,3,3,11],[3,7,4,3],[5,7,5,2],[7,5,1,1],[4,11,5,6],[6,9,7,11],[2,1,6,4],[6,2,1,9]],[[1,2,4,10],[4,5,7,6],[3,2,2,10],[4,10,5,6],[],[1,5,7,10],[7,3,3,1],[6,1,4,3],[6,5,2,7],[]],[[],[1,2,9,1],[11,13,13,13],[6,6,3,4],[4,11,3,1],[2,11,13,9],[5,3,1,5],[4,5,6,4],[11,3,9,9],[2,5,2,6]],[[],[],[3,4,3,3],[5,5,4,5],[4,4,5,3]],[[],[],[3,4,3,3],[5,5,4,5],[4,4,5,3],[3,4,3,3],[5,5,4,5],[4,4,5,3]],[[],[],[3,4,3,3],[5,5,4,5],[4,4,5,3],[3,4,3,3],[5,5,4,5],[4,4,5,3],[],[]],[[],[],[3,4,3,3],[5,5,4,5],[4,4,5,3],[3,4,3,3],[5,5,4,5],[4,4,5,3],[],[],[],[]],[[],[],[3,4,3,3],[5,5,4,5],[4,4,5,3],[3,4,3,3],[5,5,4,5],[4,4,5,3],[],[],[],[],[],[],[]]],e}();__reflect(GameConfig.prototype,"GameConfig");var UI=function(){function e(){}return e.addBtn=function(e,t,n,i,a,s,o){void 0===a&&(a=!1),void 0===o&&(o=1);var r=new egret.Bitmap;return r.texture=RES.getRes(t),e.addChild(r),a&&(r.anchorOffsetX=r.width/2,r.anchorOffsetY=r.height/2),r.x=n,r.y=i,r.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(e){r.scaleX=1.05*o,r.scaleY=1.05*o},e),r.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(e){r.scaleX=1*o,r.scaleY=1*o},e),r.addEventListener(egret.TouchEvent.TOUCH_END,function(e){r.scaleX=1*o,r.scaleY=1*o,null!=s&&s.apply(0)},e),r.$setTouchEnabled(!0),r},e.addFText=function(e,t,n,i,a){var s=new egret.BitmapText;return s.font=RES.getRes("Onet_fnt"),s.x=n,s.y=i,s.text=t,s.scaleX=a,s.scaleY=a,e.addChild(s),s},e.addPic=function(e,t,n,i,a){void 0===a&&(a=!1);var s=new egret.Bitmap;return s.texture=RES.getRes(t),e.addChild(s),s.x=n,s.y=i,a&&(s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2),s},e.addClickAction=function(e,t,n){var i=t.scaleX,a=t.scaleY;t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(e){t.scaleX=1*i,t.scaleX=1*a},e),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,function(e){t.scaleX=i,t.scaleY=a,n.apply(0)},e),t.addEventListener(egret.TouchEvent.TOUCH_END,function(e){t.scaleX=i,t.scaleY=a,n.apply(0)},e),t.$setTouchEnabled(!0)},e.addText=function(e,t,n,i){var a=new egret.TextField;return a.text=t,a.textColor=0,e.addChild(a),a.x=n,a.y=i,a},e.removeSelf=function(e){e.parent.removeChild(e)},e.WINSIZE_H=0,e.WINSIZE_W=0,e}();__reflect(UI.prototype,"UI");var Math2=function(){function e(){}return e.convertToRad=function(e){var t=e-90;return t*=Math.PI/180},e.isEven=function(e){return e%2==0?!0:!1},e.randomArrayChoice=function(t){var n=e.numberBetween(0,t.length,!0);return t[n]},e.randomChoice=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.randomArrayChoice(t)},e.numberBetween=function(e,t,n){void 0===n&&(n=!1);var i;return n?(i=t>=e?e+Math.random()*(t+1-e):t+Math.random()*(e+1-t),i=Math.floor(i)):i=e+Math.random()*(t-e),i},e.distanceBetween=function(e,t,n,i){var a=n-e,s=i-t;Math.sqrt(Math.pow(a,2)+Math.pow(s,2));return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))},e.getInverseRatio=function(e,t){var n=-(e/t-1);return 0>n&&(n=0),n},e.getRatio=function(e,t){var n=e/t;return 0>n&&(n=0),n},e.howManyDigits=function(e){var t=(Math.floor(e),String(e));return t.length},e.getZeroText=function(e,t){for(var n=e.toString(),i=t-n.length;i>0;)n="0"+n,i-=1;return n},e.removeFromArray=function(e,t){for(var n=0,i=!1;n<e.length;)e[n]!=t?n++:(e.splice(n,1),i=!0);return i},e.percentChance=function(e){return 100*Math.random()<e?!0:!1},e.randomPositiveNegative=function(e){return Math.random()>.5?e:-e},e.isPositive=function(e){return e>=0?1:-1},e.inverse=function(e){return 1/e},e.getDirToCoordinate=function(e,t,n,i){var a=n-e,s=-(i-t);Math.atan2(a,s),Math.atan2(a,s)/Math.PI*180+0;return Math.atan2(a,s)/Math.PI*180+0},e}();__reflect(Math2.prototype,"Math2");var Util=function(){function e(){}return e.createObject=function(e,t,n,i){return void 0===n&&(n=0),void 0===i&&(i=0),t.addChild(e),e.x=n,e.y=i,e},e.gotoLink=function(e){},e}();__reflect(Util.prototype,"Util");var Ball=function(e){function t(t,n,i,a){var s=e.call(this)||this;return s._colorIndex=0,s._familyPos=0,s._oriIndex=0,s._i=t,s._colorIndex=n,s._parentBottle=i,s._familyPos=a,s.addEventListener(egret.Event.ADDED_TO_STAGE,s.onEnter,s),s.addEventListener(egret.Event.REMOVED_FROM_STAGE,s.onExit,s),s}return __extends(t,e),t.prototype.onEnter=function(){var e=RES.getRes("balllst_json");this._mc=new egret.Bitmap,this._mc.texture=e.getTexture("ball"+GameData._gSeleBall+"_"+this._colorIndex),this._mc.anchorOffsetX=this._mc.width/2,this._mc.anchorOffsetY=this._mc.height/2,this._mc.x=0,this._mc.y=0,this.addChild(this._mc)},t.prototype.refreshStyleIndex=function(){var e=RES.getRes("balllst_json");this._mc.texture=e.getTexture("ball"+GameData._gSeleBall+"_"+this._colorIndex)},t.prototype.lift=function(){GameScene.instance._state=GameState.GAME_STATE_FLYING,this._oriy=this.y,this._orix=this.x,GameScene.instance._activeBall=this,this._oriIndex=GameScene.instance.getChildIndex(this),egret.Tween.get(this).to({y:this._parentBottle.y-70},200,egret.Ease.backOut).call(function(){GameScene.instance._state=GameState.GAME_STATE_SELE_ONE,this._bottleQuietX=this.x,this._bottleQuietY=this.y,GameScene.instance._guideSteps++})},t.prototype.back=function(){GameScene.instance._activeBall=null,GameScene.instance._state=GameState.GAME_STATE_FLYING,egret.Tween.get(this).to({y:this._oriy},200,egret.Ease.bounceOut).call(function(){GameScene.instance._state=GameState.GAME_STATE_IDLE})},t.prototype.flyNew=function(e,t,n,i,a){void 0===a&&(a=!0),this.visible=!0,GameScene.instance._topBall.visible=!1,a&&(this._oriIndex=GameScene.instance.getChildIndex(this),GameScene.instance.bringIndexTop(this)),GameScene.instance._activeBall=null,GameScene.instance._state=GameState.GAME_STATE_FLYING,egret.Tween.get(this).to({x:e.x,y:e.y-90},100).call(function(){GameScene.instance.setChildIndex(this,this._oriIndex),egret.Tween.get(this).to({x:t,y:n},200,egret.Ease.bounceOut).call(function(){GameScene.instance._state=GameState.GAME_STATE_IDLE,this._parentBottle=e,this._familyPos=i,this._parentBottle.chargeFull(),GameScene.instance._guideSteps++})})},t.prototype.trceFinger=function(e,t){this.x=this._bottleQuietX+e,this.y=this._bottleQuietY+t,this.visible=!1,GameScene.instance._topBall.visible=!0;var n=RES.getRes("balllst_json");GameScene.instance._topBall.texture=n.getTexture("ball"+GameData._gSeleBall+"_"+this._colorIndex),GameScene.instance._topBall.x=this.x,GameScene.instance._topBall.y=this.y},t.prototype.goBackHome=function(){console.log("goBackHome "),this.visible=!0,GameScene.instance._topBall.visible=!1,this.flyNew(this._parentBottle,this._orix,this._oriy,this._familyPos,!1)},t.prototype.onExit=function(){},t}(egret.DisplayObjectContainer);__reflect(Ball.prototype,"Ball",["egret.DisplayObject"]);var Bottle=function(e){function t(t){var n=e.call(this)||this;return n._ballsIndex=[-1,-1,-1,-1],n._ballsPos=[-1,-1,-1,-1],n._isDancing=!1,n._index=t,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onEnter,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onExit,n),n}return __extends(t,e),t.prototype.onEnter=function(){this._mc=UI.addPic(this,"bolt2_png",0,0,!0)},t.prototype.touchMoveAction=function(e){var t=e.stageX-this._touchStartX,n=e.stageY-this._touchStartY,i=5;null!=GameScene.instance._activeBall&&(Math.abs(t)>=i||Math.abs(n)>=i)&&GameScene.instance._activeBall.trceFinger(t,n)},t.prototype.touchBeginAction=function(e){if(e&&(this._touchStartX=e.stageX,this._touchStartY=e.stageY),GameScene.instance._state!=GameState.GAME_STATE_FLYING&&GameScene.instance._state!=GameState.GAME_STATE_SUCCESS&&!this._isDancing)if(GameScene.instance.clickVibrate(),GameScene.instance._state==GameState.GAME_STATE_IDLE){var t=this.getTopBall();-1!=t&&GameScene.instance._balls[this._ballsIndex[t]].lift()}else-1==this.canInsertPos()?null!=GameScene.instance._activeBall&&GameScene.instance._activeBall.back():this.pushNewBall()},t.prototype.ereaseBall=function(){for(var e=GameScene.instance._activeBall._i,t=0;4>t;t++)if(this._ballsIndex[t]==e){this._ballsIndex[t]=-1,this._ballsPos[t]=-1;break}},t.prototype.pushNewBall=function(){if(null!=GameScene.instance._activeBall){GameScene.instance._activeBall._parentBottle.ereaseBall();var e=this.getTopBallPos();this.insertBall(GameScene.instance._activeBall._i,e+1),this.refreshChildIndex();var t=25,n=this.y+47-(this.getTopBallPos()-1)*t;GameScene.instance._activeBall.flyNew(this,this.x,n,e+1)}},t.prototype.getPosBallIndex=function(e){for(var t=0;4>t;t++)if(this._ballsPos[t]==e)return this._ballsIndex[t];
return-1},t.prototype.refreshChildIndex=function(){for(var e=1;5>e;e++){var t=this.getPosBallIndex(e);-1!=t&&GameScene.instance.setChildIndex(GameScene.instance._balls[t],GameScene.instance._ballTopIndex)}},t.prototype.getTopBallPos=function(){var e=this.getTopBall();return-1==e?0:this._ballsPos[e]},t.prototype.canInsertPos=function(e){void 0===e&&(e=!0);for(var t=-1,n=0;4>n;n++)if(-1==this._ballsIndex[n]){t=n;break}return-1==t?-1:1==e&&null!=GameScene.instance._activeBall&&GameScene.instance._activeBall._parentBottle==this?-1:t},t.prototype.insertBall=function(e,t){var n=this.canInsertPos();return-1==n?!1:(this._ballsIndex[n]=e,this._ballsPos[n]=t,!0)},t.prototype.getTopBall=function(){for(var e=-1,t=-1,n=0;4>n;n++)this._ballsPos[n]>e&&(t=n,e=this._ballsPos[n]);return t},t.prototype.isEmpty=function(){for(var e=!0,t=0;4>t;t++)-1!=this._ballsIndex[t]&&(e=!1);return e},t.prototype.isFullSameColor=function(){for(var e=-1,t=!0,n=!0,i=0;4>i;i++)if(-1!=this._ballsIndex[i]){var a=GameScene.instance._balls[this._ballsIndex[i]];-1!=e?a._colorIndex!=e&&(t=!1):e=a._colorIndex}else n=!1;return n&&t?!0:!1},t.prototype.chargeFull=function(){this.isFullSameColor()&&(GameScene.instance.chargeSuccess()||GameScene.instance._shakers[this._index].shakeObj(this,shakeBottleMode.SHAKE_BOTTLE_MODE_FULL))},t.prototype.onExit=function(){},t}(egret.DisplayObjectContainer);__reflect(Bottle.prototype,"Bottle",["egret.DisplayObject"]);var Flower=function(e){function t(){var t=e.call(this)||this;return t._bgs=[],t._showPos=1,t._secondFlag=0,t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onEnter,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onExit,t),t}return __extends(t,e),t.prototype.onEnter=function(){for(var e=RES.getRes("lovelst_json"),t=0;54>t;t++){var n="love00";10>t+1?n=n+"0"+(t+1):n+=t+1;var i=new egret.Bitmap;i.texture=e.getTexture(n),i.anchorOffsetX=i.width/2,i.anchorOffsetY=i.height/2,i.x=UI.WINSIZE_W/2,i.y=GameScene.instance._YY_DEF,i.visible=!1,i.scaleX=1.3,i.scaleY=1.3,this.addChild(i),this._bgs.push(i)}this._bgs[this._showPos-1].visible=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this)},t.prototype.enterFrame=function(){return this._bgs[this._showPos-1].visible=!1,this._showPos++,this._showPos>54?void this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this):void(this._bgs[this._showPos-1].visible=!0)},t.prototype.onExit=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this)},t}(egret.DisplayObjectContainer);__reflect(Flower.prototype,"Flower",["egret.DisplayObject"]);var shakeBottleMode;!function(e){e[e.SHAKE_BOTTLE_MODE_FULL=0]="SHAKE_BOTTLE_MODE_FULL",e[e.SHAKE_BOTTLE_MODE_SUCCESS=1]="SHAKE_BOTTLE_MODE_SUCCESS"}(shakeBottleMode||(shakeBottleMode={}));var ShakeBottle=function(){function e(){this.count=0,this.timer=new egret.Timer(1e3)}return e.getInstance=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.shakeObj=function(e,t){this.stop(),this.target=e,this.initX=e.x,this.initY=e.y,this._mode=t;var n=10;this.maxDisY=12,this.maxDisX=3;var i=.5;this._mode==shakeBottleMode.SHAKE_BOTTLE_MODE_SUCCESS?(i=1,this.maxDisY=1.5*this.maxDisY,this.maxDisX=1.5*this.maxDisX):e._isDancing=!0,this.count=i*n,this.rate=n;for(var a=0;4>a;a++)-1!=e._ballsIndex[a]&&(GameScene.instance._balls[e._ballsIndex[a]]._initX=GameScene.instance._balls[e._ballsIndex[a]].x,GameScene.instance._balls[e._ballsIndex[a]]._initY=GameScene.instance._balls[e._ballsIndex[a]].y);this.timer.delay=1e3/this.rate,this.timer.repeatCount=this.count,this.timer.addEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.timer.reset(),this.timer.start()},e.prototype.shaking=function(){var e=Math.random();this.shakeObject(this.target,this.initX,this.initY,e);for(var t=0;4>t;t++)if(-1!=this.target._ballsIndex[t]){var n=GameScene.instance._balls[this.target._ballsIndex[t]];this.shakeObject(n,n._initX,n._initY,e)}var i=GameScene.instance._bottlesTop[this.target._index];this.shakeObject(i,GameScene.instance._topBottleLstX[this.target._index],GameScene.instance._topBottleLstY[this.target._index],e)},e.prototype.shakeObject=function(e,t,n,i){egret.Tween.removeTweens(e),e.x=t-this.maxDisX+i*this.maxDisX*2,e.y=n-this.maxDisY+i*this.maxDisY,egret.Tween.get(e).to({x:t,y:n},999/this.rate)},e.prototype.shakeOver=function(e,t,n){e&&(egret.Tween.removeTweens(e),e.x=t,e.y=n)},e.prototype.shakeComplete=function(){if(this.target){for(var e=0;4>e;e++)if(-1!=this.target._ballsIndex[e]){var t=GameScene.instance._balls[this.target._ballsIndex[e]];this.shakeOver(t,t._initX,t._initY)}var n=GameScene.instance._bottlesTop[this.target._index];this.shakeOver(n,GameScene.instance._topBottleLstX[this.target._index],GameScene.instance._topBottleLstY[this.target._index])}this.shakeOver(this.target,this.initX,this.initY),this.timer.removeEventListener(egret.TimerEvent.TIMER,this.shaking,this),this.timer.removeEventListener(egret.TimerEvent.TIMER_COMPLETE,this.shakeComplete,this),this.target&&(this.target._isDancing=!1)},e.prototype.stop=function(){this.shakeComplete()},e}();__reflect(ShakeBottle.prototype,"ShakeBottle");var Wave=function(e){function t(t){var n=e.call(this)||this;return n._bgs=[],n._showPos=1,n._playDirect=0,n._secondFlag=0,n.colorLst=[[255,255,255],[131,99,242],[128,196,62],[230,71,40],[191,110,189]],n._color=t,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onEnter,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onExit,n),n}return __extends(t,e),t.prototype.onEnter=function(){for(var e=0;30>e;e++){var t="s";10>e+1?t=t+"0"+(e+1):t+=e+1;var n=UI.addPic(this,t+"_jpg",UI.WINSIZE_W/2,UI.WINSIZE_H/2,!0);n.scaleY=UI.WINSIZE_H/1068,n.visible=!1,this._bgs.push(n)}var i=UI.addPic(this,"waveMask_png",UI.WINSIZE_W/2,UI.WINSIZE_H/2,!0);i.scaleY=UI.WINSIZE_H/1068,this._bgs[this._showPos-1].visible=!0,this.addEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this)},t.prototype.changeColor=function(){this._color++,this._color>=5&&(this._color=0);for(var e=0;30>e;e++);},t.prototype.enterFrame=function(){this._secondFlag++%4==0&&(this._secondFlag=1,this._bgs[this._showPos-1].visible=!1,0==this._playDirect?(this._showPos++,this._showPos>30&&(this._playDirect=1,this._showPos--)):(this._showPos--,this._showPos<1&&(this._playDirect=0,this._showPos++)),this._bgs[this._showPos-1].visible=!0)},t.prototype.onExit=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.enterFrame,this)},t.MAX_COLOR=5,t}(egret.DisplayObjectContainer);__reflect(Wave.prototype,"Wave",["egret.DisplayObject"]);var GameState;!function(e){e[e.GAME_STATE_IDLE=0]="GAME_STATE_IDLE",e[e.GAME_STATE_SELE_ONE=1]="GAME_STATE_SELE_ONE",e[e.GAME_STATE_FLYING=2]="GAME_STATE_FLYING",e[e.GAME_STATE_SUCCESS=3]="GAME_STATE_SUCCESS"}(GameState||(GameState={}));var GameClickMode;!function(e){e[e.CLICK_SOUND=0]="CLICK_SOUND",e[e.CLICK_VIBRATE=1]="CLICK_VIBRATE"}(GameClickMode||(GameClickMode={}));var GameScene=function(e){function t(t){var n=e.call(this)||this;return n._bottles=[],n._bottlesTop=[],n._balls=[],n._state=GameState.GAME_STATE_IDLE,n._activeBall=null,n._ballTopIndex=0,n._layerTopIndex=0,n._topBottleLstX=[],n._topBottleLstY=[],n._topBottleLstI=[],n._shakers=[],n._taiziYY=217,n._touchingBottle=null,n._topBall=null,n._pauseFlag=!1,n._guideHandShowFlag=0,n._guideHandPos=0,n._secondFlag=0,n._YY_DEF=0,n._guideSteps=0,n._level=t,n}return __extends(t,e),t.prototype.ifShowGuide=function(){return 1==GameData._gLevel||GameData.DEBUG?!0:!1},t.prototype.onEnter=function(){t.instance=this;for(var e=0;15>e;e++){var n=new ShakeBottle;this._shakers.push(n)}this._wave=new Wave((this._level-1)%5),this.addChild(this._wave);var i=UI.addPic(this,"wave_mask_png",UI.WINSIZE_W/2,147*UI.WINSIZE_H/1068,!0);i.scaleY=UI.WINSIZE_H/1068;var a;a=this._level<10?UI.WINSIZE_W/2-13:this._level<100?UI.WINSIZE_W/2-23:UI.WINSIZE_W/2-33;UI.addFText(this,""+this._level,a,115*UI.WINSIZE_H/1068,.55);this._taiziYY=this._taiziYY*UI.WINSIZE_H/1068,this._taizi=UI.addPic(this,"taizi_png",UI.WINSIZE_W/2,UI.WINSIZE_H-140-(this._taiziYY-140),!1),this._taizi.anchorOffsetX=240,this._taizi.anchorOffsetY=364,this._taizi.scaleY=1.3,this._YY_DEF=UI.WINSIZE_H-140-220-(this._taiziYY-140),this.initBolt(),this.addUI(),this._guideHand1=UI.addPic(this,"hand1_png",0,0,!0),this._guideHand2=UI.addPic(this,"hand2_png",0,0,!0),this._guideHand1.visible=!1,this._guideHand2.visible=!1,this.addEventListener(egret.Event.ENTER_FRAME,this.updateFrame,this)},t.prototype.updateFrame=function(){this._secondFlag++%8==0&&(this._secondFlag=1,this._guideHandPos&&this.ifShowGuide()&&(0==this._guideHandShowFlag?(this._guideHand1.visible=!0,this._guideHand2.visible=!1,this._guideHandShowFlag=1):(this._guideHand1.visible=!1,this._guideHand2.visible=!0,this._guideHandShowFlag=0)),this.checkGuide())},t.prototype.checkGuide=function(){if(this.ifShowGuide()){if(t.instance._state==GameState.GAME_STATE_SUCCESS)return void this.showGuide(0);switch(this._guideSteps){case 0:case 2:case 4:case 8:this.showGuide(1);break;case 1:case 3:case 5:case 7:this.showGuide(3);break;case 6:case 9:this.showGuide(2)}}},t.prototype.checkGuideCanClick=function(e){return 0==this._guideHandPos?!0:this._guideHandPos==e?!0:!1},t.prototype.showGuide=function(e){if(0==e)this._guideHand1.visible=!1,this._guideHand2.visible=!1;else{if(e==this._guideHandPos)return;this._guideHand1.visible=!0,this._guideHand2.visible=!0,this._guideHandPos=e;var t=[165,245,330];this._guideHand1.x=t[this._guideHandPos-1],this._guideHand1.y=this._YY_DEF+10,this._guideHand2.x=t[this._guideHandPos-1],this._guideHand2.y=this._YY_DEF+10}},t.prototype.addUI=function(){var e=UI.addBtn(this,"bgBtn_png",34,42,!1,function(){t.instance._wave.changeColor()});e.visible=!1,UI.addBtn(this,"mallBtn_png",32,104,!1,function(){if(!t.instance._pauseFlag){var e=new MallLayer;SceneManager.Instance.pushScene(e)}}),UI.addBtn(this,"pauseBtn_png",34,42,!1,function(){if(!t.instance._pauseFlag){var e=new PauseLayer;SceneManager.Instance.pushScene(e)}})},t.prototype.getCutSize=function(e){var t=0;return t=6==e?3:7==e||8==e?4:5},t.prototype.initBolt=function(){var e=GameConfig.getStageConfig(this._level-1),t=e.length;if(5>=t)this.setOneRow(e,1,1,0),this._taizi.scaleY=1.05;else if(10>=t){for(var n=[],i=[],a=this.getCutSize(t),s=0;a>s;s++)n[s]=e[s];this.setOneRow(n,2,1,0);for(var s=a;t>s;s++)i[s-a]=e[s];this.setOneRow(i,2,2,a),this._taizi.scaleY=1.1}else{for(var n=[],i=[],o=[],a=this.getCutSize(t-5),s=0;a>s;s++)n[s]=e[s];this.setOneRow(n,3,1,0);for(var s=a;t-5>s;s++)i[s-a]=e[s];this.setOneRow(i,3,2,a);for(var s=t-5;t>s;s++)o[s-(t-5)]=e[s];this.setOneRow(o,3,3,t-5),this._taizi.scaleY=1.4}this._ballTopIndex=this.addTopBottle()},t.prototype.setOneRow=function(e,t,n,i){for(var a=e.length,s=80,o=[[this._YY_DEF],[UI.WINSIZE_H-140-220-110-(this._taiziYY-140),UI.WINSIZE_H-140-220+90-(this._taiziYY-140)],[UI.WINSIZE_H-140-220-110-110-30-(this._taiziYY-140),UI.WINSIZE_H-140-220-50-30+10-(this._taiziYY-140),UI.WINSIZE_H-140-220+110-(this._taiziYY-140)]],r=o[t-1][n-1],l=[0,0,0,1,1.5,2],c=UI.WINSIZE_W/2-l[a]*s,h=0;a>h;h++){var _=c+s*h,d=new Bottle(h+i);d.x=_,d.y=r,this.addChild(d),this._bottles.push(d);for(var u=r+47,g=25,p=0,f=.9,v=e[h].length-1;v>=0;v--){var E=new Ball(this._balls.length,e[h][v],d,p+1);E.x=_,E.y=u-p++*g,this.addChild(E),this._balls.push(E),d.insertBall(this._balls.length-1,p),E.scaleX=f,E.scaleY=f}this._topBottleLstI.push(h+i),this._topBottleLstX.push(_),this._topBottleLstY.push(r)}},t.prototype.addTopBottle=function(){for(var e=-1,n=0;n<this._topBottleLstI.length;n++){var i=(this._topBottleLstI[n],UI.addPic(this,"bolt1_png",this._topBottleLstX[n],this._topBottleLstY[n],!0));this._bottlesTop.push(i),-1==e&&(e=t.instance.getChildIndex(i))}var a=UI.addPic(this,"blank_png",0,0,!1);this._layerTopIndex=this.getChildIndex(a);var s=RES.getRes("balllst_json"),s=RES.getRes("balllst_json");return this._topBall=new egret.Bitmap,this._topBall.texture=s.getTexture("ball1_1"),this._topBall.anchorOffsetX=this._topBall.width/2,this._topBall.anchorOffsetY=this._topBall.height/2,this._topBall.x=0,this._topBall.y=0,this.addChild(this._topBall),this._topBall.visible=!1,this.addBlankTouch(),e-1},t.prototype.addBlankTouch=function(){var e=new egret.Bitmap;e.texture=RES.getRes("blankTouch_png"),this.addChild(e),e.anchorOffsetX=e.width/2,e.anchorOffsetY=e.height/2,e.x=UI.WINSIZE_W/2,e.y=UI.WINSIZE_H/2,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(e){if(!t.instance._pauseFlag)for(var n=0;n<t.instance._bottlesTop.length;n++)if(t.instance._bottlesTop[n].hitTestPoint(e.stageX,e.stageY)){var i=this._topBottleLstI[n];t.instance.checkGuideCanClick(i+1)&&t.instance._bottles[i].touchBeginAction(e),t.instance.ifShowGuide()||(t.instance._touchingBottle=t.instance._bottles[i]);break}},this),e.addEventListener(egret.TouchEvent.TOUCH_MOVE,function(e){if(!t.instance.ifShowGuide()&&!t.instance._pauseFlag&&t.instance._touchingBottle){if(t.instance._state==GameState.GAME_STATE_FLYING)return;t.instance._touchingBottle.touchMoveAction(e)}},this),e.addEventListener(egret.TouchEvent.TOUCH_END,function(e){if(!t.instance.ifShowGuide()&&!t.instance._pauseFlag&&t.instance._touchingBottle){if(t.instance._state==GameState.GAME_STATE_FLYING&&null!=t.instance._activeBall)return;if(null==t.instance._activeBall)return;for(var n=0,i=1,a=2,s=3,o=4,r=a,l=-1,c=0;c<t.instance._bottlesTop.length;c++){var h=t.instance._activeBall.x,_=t.instance._activeBall.y;if(t.instance._bottlesTop[c].hitTestPoint(h,_+50)||t.instance._bottlesTop[c].hitTestPoint(h,_)){if(l=this._topBottleLstI[c],t.instance._bottles[l]==t.instance._touchingBottle){var d=t.instance._activeBall;r=d.$getY()==d._parentBottle.$getY()-70?n:i}else r=-1!=t.instance._bottles[l].canInsertPos(!1)?s:o;break}}switch(console.log("foundHitStatus = "+r),r){case i:case a:case o:t.instance._activeBall.goBackHome();break;case n:break;case s:t.instance._bottles[l].touchBeginAction(null)}t.instance._touchingBottle=null}},this),e.$setTouchEnabled(!0)},t.prototype.bringIndexTop=function(e){this.setChildIndex(e,this._layerTopIndex)},t.prototype.chargeSuccess=function(){for(var e=!0,t=0;t<this._bottles.length;t++)if(!this._bottles[t].isEmpty()&&!this._bottles[t].isFullSameColor()){e=!1;break}if(e){for(var t=0;t<this._bottles.length;t++)this._shakers[t].shakeObj(this._bottles[t],shakeBottleMode.SHAKE_BOTTLE_MODE_SUCCESS);this.resultAction();var n=new Flower;this.addChild(n),this._state=GameState.GAME_STATE_SUCCESS}return e},t.prototype.clickVibrate=function(){t.CLICK_MODE==GameClickMode.CLICK_VIBRATE?platform.vibrate():SplashScene.playSound("click")},t.prototype.resultAction=function(){egret.setTimeout(function(e){var t=new Resultlayer;SceneManager.Instance.pushScene(t)},this,2e3)},t.prototype.changeBallIndex=function(){for(var e=0;e<this._balls.length;e++)this._balls[e].refreshStyleIndex()},t.prototype.onExit=function(){for(var e=0;e<this._shakers.length;e++)delete this._shakers[e];this.removeEventListener(egret.Event.ENTER_FRAME,this.updateFrame,this)},t.CLICK_MODE=GameClickMode.CLICK_VIBRATE,t}(Scene);__reflect(GameScene.prototype,"GameScene");var MallLayer=function(e){function t(){var n=e.call(this)||this;return n._icons=[],n._unknows=[],n._selects=[],n._flashs=[],n._secondFlag=0,n._buying=!1,n._showingPos=0,n._randNum=0,n._showingTimes=0,n._unlockLst=[],t.instance=n,GameScene.instance._pauseFlag=!0,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onEnter,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onExit,n),n}return __extends(t,e),t.prototype.onEnter=function(){t.entrySlectBall=GameData._gSeleBall;var e=UI.addPic(this,"overBg_png",UI.WINSIZE_W/2,UI.WINSIZE_H/2,!0);e.scaleX=24,e.scaleY=53.4,e.alpha=248/255,UI.addPic(this,"mallTitle_png",UI.WINSIZE_W/2,133-t.TOP_UP_Y,!0),UI.addBtn(this,"returnBtn_png",60,132-t.TOP_UP_Y,!0,function(e){this._buying||(GameScene.instance._pauseFlag=!1,SceneManager.Instance.popScene(),t.entrySlectBall!=GameData._gSeleBall&&GameScene.instance.changeBallIndex())}),UI.addPic(this,"goldIcon_png",353,128-t.TOP_UP_Y,!0),this._goldTxt=UI.addFText(this,""+GameData._gGold,380,110-t.TOP_UP_Y,.4);for(var n=125,i=265-t.TOP_UP_Y,a=122,s=124,o=RES.getRes("mboxlst_json"),r=1,l=0;4>l;l++)for(var c=i+l*s,h=function(e){var i=n+e*a,s=new egret.Bitmap;s.texture=o.getTexture("mbox"+r),s.anchorOffsetX=s.width/2,s.anchorOffsetY=s.height/2,s.x=i,s.y=c,_.addChild(s),_._icons.push(s),_._unknows.push(UI.addPic(_,"unknowPic_png",i,c,!0)),_._selects.push(UI.addPic(_,"seleFlag_png",i,c,!0)),_._flashs.push(UI.addPic(_,"randFlag_png",i,c,!0));var l=r;UI.addBtn(_,"iconClickBtn_png",i,c,!0,function(e){this._buying||t.instance.clickIconAction(l)}),r++},_=this,d=0;3>d;d++)h(d);this._unlockNeedGoldBtn=UI.addBtn(this,"randBuyBtn_png",160,810-t.TOP_UP_Y,!0,function(){this._buying||t.instance.randAction()}),this._unlockNeedGold=UI.addFText(this,"300",180,794-t.TOP_UP_Y,.35),UI.addBtn(this,"videoGetBtn_png",330,810-t.TOP_UP_Y,!0,function(){this._buying||("windows"==SplashScene.channel?t.instance.videoAction():platform.playAdVideo())}),this.showUnlock(),this.addEventListener(egret.Event.ENTER_FRAME,this.updateFrame,this)},t.prototype.clickIconAction=function(e){0!=GameData._gMallBalls[e-1]&&GameData._gSeleBall!=e&&(GameData.selectBall(e),this.showUnlock())},t.prototype.getUnlockGold=function(){for(var e=0,n=0;12>n;n++)1==GameData._gMallBalls[n]&&e++;return t.UNLOCK_TIMES[e-1]},t.prototype.randAction=function(){for(var e=!1,t=0;12>t;t++)if(0==GameData._gMallBalls[t]){e=!0;break}if(e&&!(GameData._gGold<this.getUnlockGold()||this._buying)){GameData.cutGold(this.getUnlockGold()),this._buying=!0,this._randNum=Flash.random(10)+10,this._showingPos=0,this._unlockLst=[],this._showingTimes=0;for(var t=0;12>t;t++)0==GameData._gMallBalls[t]&&this._unlockLst.push(t)}},t.prototype.showUnlock=function(){for(var e=0;12>e;e++)this._selects[e].visible=!1,this._flashs[e].visible=!1,1==GameData._gMallBalls[e]&&(this._unknows[e].visible=!1),GameData._gSeleBall==e+1&&(this._selects[e].visible=!0);this._unlockNeedGold.text=""+this.getUnlockGold(),0==this.getUnlockGold()&&(this._unlockNeedGold.visible=!1,this._unlockNeedGoldBtn.visible=!1)},t.prototype.videoAction=function(){GameData.addGold(200),this._goldTxt.text=""+GameData._gGold},t.prototype.unLockBall=function(e){GameData.unlockBall(e),this.showUnlock()},t.prototype.updateFrame=function(){var e=this;if(this._secondFlag%30==0){if(GameData._gRefreshGoldFlag&&(this._goldTxt.text=""+GameData._gGold,GameData._gRefreshGoldFlag=!1),this._buying){for(var t=0;t<this._unlockLst.length;t++){var n=this._unlockLst[t];this._flashs[n].visible=!1}var i=this._unlockLst[this._showingPos];this._flashs[i].visible=!0,this._showingPos=this._showingPos+1,this._showingPos==this._unlockLst.length&&(this._showingPos=0),this._showingTimes++==this._randNum&&(this._buying=!1,this.unLockBall(i),this.clickIconAction(i+1))}var a=platform.returnVideoStatus();a.then(function(t){1==Number(t)&&e.videoAction()})}},t.prototype.onExit=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.updateFrame,this)},t.UNLOCK_TIMES=[300,500,800,1e3,1200,1400,1600,1800,2e3,2200,3e3,0],t.instance=null,t.TOP_UP_Y=100,t}(Scene);__reflect(MallLayer.prototype,"MallLayer");var PauseLayer=function(e){function t(){var n=e.call(this)||this;return t.instance=n,GameScene.instance&&(GameScene.instance._pauseFlag=!0),n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onEnter,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onExit,n),n}return __extends(t,e),t.prototype.onEnter=function(){var e=UI.addPic(this,"overBg_png",UI.WINSIZE_W/2,UI.WINSIZE_H/2,!0);e.scaleX=24,e.scaleY=53.4,e.alpha=120/255,UI.addPic(this,"pausebg_png",UI.WINSIZE_W/2,UI.WINSIZE_H/2,!0),UI.addBtn(this,"closeBtn_png",UI.WINSIZE_W/2+153,UI.WINSIZE_H/2-148-16,!0,function(e){GameScene.instance&&(GameScene.instance._pauseFlag=!1),SceneManager.Instance.popScene()}),this.vibOn=UI.addBtn(this,"on_png",UI.WINSIZE_W/2+115,UI.WINSIZE_H/2,!0,function(e){GameData._gIsVibrate=0,GameData.saveItem("_gIsVibrate",GameData._gIsVibrate),t.instance.showVib()}),this.vibOff=UI.addBtn(this,"off_png",UI.WINSIZE_W/2+115,UI.WINSIZE_H/2,!0,function(e){GameData._gIsVibrate=1,GameData.saveItem("_gIsVibrate",GameData._gIsVibrate),t.instance.showVib()}),this.showVib()},t.prototype.showVib=function(){1==GameData._gIsVibrate?(this.vibOn.visible=!0,this.vibOff.visible=!1):(this.vibOn.visible=!1,this.vibOff.visible=!0)},t.prototype.onExit=function(){},t.instance=null,t}(Scene);__reflect(PauseLayer.prototype,"PauseLayer");var Resultlayer=function(e){function t(){var n=e.call(this)||this;return n._bitmapText=null,n._secondFlag=0,t.instance=n,n.addEventListener(egret.Event.ADDED_TO_STAGE,n.onEnter,n),n.addEventListener(egret.Event.REMOVED_FROM_STAGE,n.onExit,n),n}return __extends(t,e),t.prototype.onEnter=function(){GameScene.instance._pauseFlag=!0;var e=UI.addPic(this,"overBg_png",UI.WINSIZE_W/2,UI.WINSIZE_H/2,!0);e.scaleX=24,e.scaleY=53.4,e.alpha=248/255,this._dropGold=GameData.getDropGold();var n=GameData.getDropRate();this._totalRate=n+GameData._gGiftRate,this._totalRate>=100&&(this._totalRate=100);GameData._gLevel;GameData.finishLevel(this._dropGold,n);GameData._gLevel;UI.addPic(this,"tips1_png",UI.WINSIZE_W/2,t.TOP_UP_Y,!0),this._bitmapText=UI.addFText(this,""+GameData._gLevel,275,t.TOP_UP_Y-55,.5);var i=UI.addPic(this,"glow5_png",UI.WINSIZE_W/2,UI.WINSIZE_H/2+t.MIDDLE_UP_Y,!0);egret.Tween.get(i,{loop:!0}).to({rotation:360},2e3,egret.Ease.sineIn),this._rateTxt=UI.addFText(this,this._totalRate+"%",UI.WINSIZE_W/2-20,UI.WINSIZE_H/2+116+t.MIDDLE_UP_Y,.4),this.addBox(this._totalRate);var a=UI.addPic(this,"goldIcon_png",UI.WINSIZE_W/2-36,UI.WINSIZE_H-t.BOTTORM_UP_Y-47-50-15);a.scaleX=.75,a.scaleY=.75,this._addGoldtxt=UI.addFText(this,"+"+this._dropGold,UI.WINSIZE_W/2,UI.WINSIZE_H-t.BOTTORM_UP_Y-47-50-15,.3),UI.addBtn(this,"blankTouch_png",UI.WINSIZE_W/2,UI.WINSIZE_H/2,!0,function(){var e=new GameScene(GameData._gLevel);SceneManager.Instance.changeScene(e)}),100==this._totalRate?this._videoBtn=UI.addBtn(this,"btnGetBtn_png",UI.WINSIZE_W/2,UI.WINSIZE_H-t.BOTTORM_UP_Y-47,!0,function(){t.instance.moreGoldVideo()}):(this._videoBtn=UI.addBtn(this,"moreBtn_png",UI.WINSIZE_W/2,UI.WINSIZE_H-t.BOTTORM_UP_Y-47,!0,function(){t.instance.moreGoldVideo()}),this._add10Goldtxt=UI.addFText(this,""+10*this._dropGold,UI.WINSIZE_W/2+27,UI.WINSIZE_H-t.BOTTORM_UP_Y-48,.3)),UI.addPic(this,"contineBtn_png",UI.WINSIZE_W/2,UI.WINSIZE_H-t.BOTTORM_UP_Y,!0),this.addEventListener(egret.Event.ENTER_FRAME,this.updateFrame,this)},t.prototype.videoAction=function(){if(this._totalRate>=100){var e=GameData.getDropBoxGold();this._addGoldtxt.text="+"+e,GameData.addGold(e),this._videoBtn.visible=!1,this._rateTxt.text="0%"}else{var e=10*this._dropGold;this._addGoldtxt.text="+"+10*this._dropGold,GameData.addGold(e),this._videoBtn.visible=!1,this._add10Goldtxt.visible=!1}},t.prototype.updateFrame=function(){var e=this;if(this._secondFlag%30==0){var t=platform.returnVideoStatus();t.then(function(t){1==Number(t)&&e.videoAction()})}},t.prototype.moreGoldVideo=function(){"windows"==SplashScene.channel?this.videoAction():platform.playAdVideo()},t.prototype.addBox=function(e){var n=UI.WINSIZE_H/2+113+t.MIDDLE_UP_Y,i=130,a=UI.addPic(this,"giftWhite_png",i,n);a.$anchorOffsetY=226;var s=UI.addPic(this,"gift_png",i,n);s.$anchorOffsetY=226;var o=new egret.Shape;o.graphics.beginFill(16711680),o.graphics.drawRect(0,0,220,e/100*226),o.graphics.endFill(),this.addChild(o),o.$anchorOffsetY=e/100*226,o.x=i,o.y=n,s.mask=o},t.prototype.onExit=function(){this.removeEventListener(egret.Event.ENTER_FRAME,this.updateFrame,this)},t.instance=null,t.TOP_UP_Y=50,t.BOTTORM_UP_Y=50,t.MIDDLE_UP_Y=-100,t}(Scene);__reflect(Resultlayer.prototype,"Resultlayer");var SplashScene=function(e){function t(){var t=e.call(this)||this;return t.secondFlag=0,t}return __extends(t,e),t.entryNext=function(){if(!t.entryalready){t.entryalready=!0;var e=new GameScene(GameData._gLevel);SceneManager.Instance.changeScene(e)}},t.prototype.init=function(){var e=new egret.HttpRequest;if(e.responseType=egret.HttpResponseType.TEXT,"android"!=t.channel){var n="https://www.yiruituo.com/tt.php?ad=0&file="+t.gameName+"&channel="+t.gameChannel+"&version="+t.version;e.open(n,egret.HttpMethod.GET),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),e.send(),e.addEventListener(egret.Event.COMPLETE,this.onPostComplete,this),e.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onPostIOError,this),e.addEventListener(egret.ProgressEvent.PROGRESS,this.onPostProgress,this)}if("android"==t.channel)egret.setTimeout(function(e){t.entryNext()},this,2500);else{var i=500,a=1e3;GameData.DEBUG&&(i=10,a=10),egret.setTimeout(function(e){ShakeTool.getInstance().shakeObj(t.instance.logo,.5,10,10),egret.setTimeout(function(e){t.entryNext()},this,a)},this,i)}this.addEventListener(egret.Event.ENTER_FRAME,this.update2,this)},t.prototype.replaceShowBg=function(){UI.addPic(this,"splash2_jpg",UI.WINSIZE_W/2,UI.WINSIZE_H/2,!0),this.logo=UI.addPic(this,"logo_png",UI.WINSIZE_W/2,UI.WINSIZE_H/2-60,!0);var e=UI.addBtn(this,"hand2_png",100,100,!0,function(){});e.visible=!1},t.prototype.onEnter=function(){t.instance=this,GameData.initData(),this.replaceShowBg(),egret.setTimeout(function(e){t.instance.init()},this,800)},t.prototype.update2=function(){},t.showCloseBtn=function(e){if(null!=e&&("wx"==t.channel||"qq"==t.channel)&&0!=t.showAd){t.closeBtnParent=e;var n=UI.WINSIZE_W/2+135+33,i=UI.WINSIZE_H-100-10;"wx"==t.channel?(n=UI.WINSIZE_W/2+135+33+30,i=UI.WINSIZE_H-150+6):(n=UI.WINSIZE_W/2+135+33,i=UI.WINSIZE_H-100-10),t.closeBtn=UI.addBtn(e,"ad_close_png",n,i,!0,function(e){platform.hideBanner();try{t.closeBtnParent.removeChild(t.closeBtn)}catch(n){}})}},t.showBanner=function(e){return"android"==t.channel?void egret.ExternalInterface.call("showInsert","message from js"):void(1==t.showAd&&(t.visitAdSum(1),t.showBannerControl(e)))},t.showBannerControl=function(e){"tt"!=t.channel?(platform.startRecord(),t.showCloseBtn(e)):platform.showBanner()},t.showBannerForce=function(e){return"android"==t.channel?void egret.ExternalInterface.call("showInsertForce","message from js"):(t.visitAdSum(1),void("tt"!=t.channel&&1==t.showAd?(platform.startRecord(),t.showCloseBtn(e)):platform.showBanner()))},t.hideBanner=function(){0==t.showAd&&platform.hideBanner()},t.showVideoForce=function(){1==t.isVideo&&(t.visitAdSum(2),platform.playAdVideo())},t.loginTT=function(){0==t.loginAlready&&(t.loginAlready=!0,platform.login(),platform.getUserInfo())},t.addRecordBtn=function(e,n,i){"tt"==t.channel},t.prototype.onPostComplete=function(e){var n=e.currentTarget;console.log("post data : ",n.response);var i=n.response.substring(0,50);t.defStr=i.substr(0,1),("2"==i.substr(0,1)||"3"==i.substr(0,1)||"4"==i.substr(0,1))&&(t.showAd=!0),("3"==i.substr(0,1)||"4"==i.substr(0,1))&&(t.isVideo=!0),"4"==i.substr(0,1)&&(t.isShare=!0)},t.prototype.onPostIOError=function(e){console.log("post error : "+e)},t.prototype.onPostProgress=function(e){console.log("post progress : "+Math.floor(100*e.bytesLoaded/e.bytesTotal)+"%")},t.prototype.onExit=function(){},t.addVersion=function(e){var n=UI.addText(e,t.gameChannel+":"+t.channel+"_"+t.version+"_"+t.defStr,UI.WINSIZE_W-100,UI.WINSIZE_H-40);n.size=14},t.visitAdSum=function(e){var n="https://www.yiruituo.com/tt.php?ad="+e+"&file="+t.gameName+"&channel="+t.gameChannel+"&version="+t.version,i=new egret.HttpRequest;i.responseType=egret.HttpResponseType.TEXT,i.open(n,egret.HttpMethod.GET),i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send()},t.clickMusicBtn=function(){if(t.soundflag)t.soundflag=!1,t.soundChannel.stop();else{t.soundflag=!0;var e=new egret.Sound;e.addEventListener(egret.Event.COMPLETE,function(n){t.soundChannel=e.play(0,0)},this),e.load("resource/assets/sound/bgmusic.mp3")}},t.playMusic=function(){var e=new egret.Sound;e.addEventListener(egret.Event.COMPLETE,function(n){t.soundChannel=e.play(0,0)},this),e.load("resource/assets/sound/bgmusic.mp3")},t.playSound=function(e){if(void 0===e&&(e="click"),t.soundflag){var n=new egret.Sound;n.addEventListener(egret.Event.COMPLETE,function(e){n.play(0,1)},this),n.addEventListener(egret.IOErrorEvent.IO_ERROR,function(e){console.log("loaded error!")},this),n.load("resource/assets/sound/"+e+".mp3")}},t.shareWaitSecond=120,t.autoTipShareFlag=!0,t.version="0",t.channel="windows",t.gameName="ad_homie",t.gameChannel="windows",t.gameShareFlag=!1,t.showAd=!1,t.isVideo=!1,t.isShare=!1,t.entryalready=!1,t.loginAlready=!1,t.runningSeconds=0,t.soundflag=!0,t.defStr="",t}(Scene);__reflect(SplashScene.prototype,"SplashScene");